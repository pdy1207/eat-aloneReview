<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"
    />
    <title>사이드바와 지도</title>
    <!-- 네이버 지도 API 스크립트를 불러옵니다. -->
    <script
      type="text/javascript"
      src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=s34sdxqx31"
    ></script>
    <style>
      body,
      html {
        height: 100%;
        margin: 0;
        padding: 0;
        overflow: hidden;
        display: flex;
      }

      #map {
        flex: 1;
        height: 100%;
        position: relative;
      }

      /* 맨 왼쪽에 위치할 사이드바 스타일 */
      .sidebar {
        width: 300px;
        height: 100%;
        background-color: #f0f0f0;
        padding: 20px;
        box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.5);
        overflow-y: auto;
      }

      /* 마커에 대한 스타일 */
      .custom-marker {
        background-color: #007bff;
        color: white;
        border-radius: 50%;
        width: 24px;
        height: 24px;
        text-align: center;
        line-height: 24px;
        cursor: pointer;
        position: relative;
        transition: background-color 0.2s ease;
      }

      /* 마커 포커싱 스타일 */
      .custom-marker.focused {
        background-color: #0056b3;
      }

      /* 마커 옆에 제목 표시 스타일 */
      .marker-title {
        position: absolute;
        left: 28px;
        top: 6px;
        background-color: white;
        padding: 4px;
        border-radius: 4px;
        box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        display: none;
      }

      /* 마우스 호버 시 제목 표시 */
      .custom-marker:hover .marker-title {
        display: block;
      }
    </style>
  </head>
  <body>
    <!-- 지도와 사이드바를 감싸는 컨테이너 -->
    <div style="flex: 1; display: flex">
      <!-- 지도 -->
      <div id="map"></div>

      <!-- 사이드바 -->
      <div class="sidebar">
        <!-- 리스트 형식으로 내용을 추가하세요 -->
        <h2>장소 목록</h2>
        <ul>
          <li>
            <a href="#" data-lat="36.3515021" data-lng="127.4375133"
              >틈새라면 대전터미널점</a
            >
          </li>
          <!-- 추가적인 목록 아이템을 여기에 추가할 수 있습니다 -->
        </ul>
      </div>
    </div>

    <script>
      var mapOptions = {
        center: new naver.maps.LatLng(37.3595704, 127.105399),
        zoom: 15,
      };

      var map = new naver.maps.Map("map", mapOptions);
      var markers = [];

      // 마커를 생성하고 지도에 표시하는 함수
      function createMarker(lat, lng, title) {
        var markerOptions = {
          position: new naver.maps.LatLng(lat, lng),
          map: map,
          icon: {
            content:
              '<div class="custom-marker"><div class="marker-title">' +
              title +
              "</div></div>",
            size: new naver.maps.Size(32, 32),
            anchor: new naver.maps.Point(16, 16),
          },
        };

        var marker = new naver.maps.Marker(markerOptions);
        markers.push(marker);

        // 마커 포커싱 및 이벤트 처리
        marker.element = marker.getElement();
        marker.element.addEventListener("mousemove", function () {
          marker.element.classList.add("focused");
          map.panTo(markerOptions.position); // 마커에 호버 시 해당 위치로 부드럽게 이동
        });
        marker.element.addEventListener("mouseleave", function () {
          marker.element.classList.remove("focused");
        });

        // 마커를 클릭했을 때 해당 위치로 이동
        naver.maps.Event.addListener(marker, "click", function () {
          map.setCenter(markerOptions.position);
        });
      }

      // 사이드바에서 목록 항목을 클릭했을 때 해당 마커로 이동
      var sidebarItems = document.querySelectorAll(".sidebar a");
      sidebarItems.forEach(function (item) {
        item.addEventListener("click", function (e) {
          e.preventDefault();
          var lat = parseFloat(item.getAttribute("data-lat"));
          var lng = parseFloat(item.getAttribute("data-lng"));
          map.setCenter(new naver.maps.LatLng(lat, lng));
        });
      });

      // 초기에 마커 생성
      createMarker(36.3515021, 127.4375133, "틈새라면 대전터미널점"); // 예제 마커
    </script>
  </body>
</html>
